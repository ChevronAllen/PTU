<script type="text/worker">
    let moveAttrs = [ 
        "repeating_moves_mlKnown","repeating_moves_mlName","repeating_moves_mlType","repeating_moves_mlFrequency",
        "repeating_moves_mlCat","repeating_moves_mlRange","repeating_moves_mlAC","repeating_moves_mlCrit",
        "repeating_moves_mlDB","repeating_moves_mlDB_roll","repeating_moves_mlDamageBonus","repeating_moves_mlUses_max",
        "repeating_moves_mlContestType","repeating_moves_mlContestEffect","repeating_moves_mlEffects",
        "repeating_moves_mlID"
    ];

    on("change:generic_db", function(){
        update = {};
        
        getAttrs(["generic_db"],function(values){
            db = parseInt(values["generic_db"]) || 0;
            x = dbCalc(db);
            
            update["generic_db_roll"] = "" + x.amount + "" + x.dice + " + " + x.bonus;
            
            setAttrs(update);
        });
        
    });
    
    on("change:struggle_db", function(){
        update = {};
        
        getAttrs(["struggle_db"],function(values){
            db = parseInt(values["struggle_db"]) || 0;
            x = dbCalc(db);
            
            update["struggle_db_roll"] = "" + x.amount + "" + x.dice + " + " + x.bonus;
            
            setAttrs(update);
        });
        
    });
    
    on("change:input", function() {
        infoImport();
    });
    
    on("change:repeating_moves:mlKnown", function(eventinfo) {
        
        
        var update = {};
        if(eventinfo.newValue == "1"){
            var newID = generateRowID();
            
            getAttrs(moveAttrs, function(values){
                
                
                //removeRepeatingRow("repeating_movesKnown_" + values["repeating_moves_mlID"]);
                console.log("build stats");
                
                update["repeating_movesKnown_"+ newID +"_mkName"]          = values["repeating_moves_mlName"];
                update["repeating_movesKnown_"+ newID +"_mkType"]          = values["repeating_moves_mlType"];
                update["repeating_movesKnown_"+ newID +"_mkCat"]           = values["repeating_moves_mlCat"];
                update["repeating_movesKnown_"+ newID +"_mkFrequency"]     = values["repeating_moves_mlFrequency"];
                update["repeating_movesKnown_"+ newID +"_mkRange"]         = values["repeating_moves_mlRange"];
                update["repeating_movesKnown_"+ newID +"_mkAC"]            = values["repeating_moves_mlAC"];
                update["repeating_movesKnown_"+ newID +"_mkCrit"]          = values["repeating_moves_mlCrit"];
                update["repeating_movesKnown_"+ newID +"_mkDB"]            = values["repeating_moves_mlDB"];
                update["repeating_movesKnown_"+ newID +"_mkDB_roll"]       = values["repeating_moves_mlDB_roll"];
                update["repeating_movesKnown_"+ newID +"_mkDamageBonus"]   = values["repeating_moves_mlDamageBonus"];
                update["repeating_movesKnown_"+ newID +"_mkContestType"]   = values["repeating_moves_mlContestType"];
                update["repeating_movesKnown_"+ newID +"_mkContestEffect"] = values["repeating_moves_mlContestEffect"];
                update["repeating_movesKnown_"+ newID +"_mkEffects"]       = values["repeating_moves_mlEffects"];
                update["repeating_movesKnown_"+ newID +"_mkUses_max"]      = values["repeating_moves_mlUses_max"];
            
                console.log("start update ");
                
                console.log(update);
                
                setAttrs(update);
                setAttrs({
                    "repeating_moves_mlID" : newID
                });
                
                console.log("end update");
                
            });
            
        }else{
            
             getAttrs(["repeating_moves_mlID"], function(values){
                 removeRepeatingRow("repeating_movesKnown_" + values["repeating_moves_mlID"]);
             });
             
        }
        
        
    });
    
    on("remove:repeating_moves", function(eventinfo) {
        //var id = eventinfo.removedInfo["repeating_moves_-LrS5VRJcSqFE1JXdN5l_mlID"];
        
        //removeRepeatingRow("repeating_movesKnown_" + id);
        
        for (var property in eventinfo.removedInfo) {
            console.log(property);
            if (eventinfo.removedInfo.hasOwnProperty(property)) {
                if (property.match(/.*mlID/g)!=null) {
                    
                    removeRepeatingRow("repeating_movesKnown_" + eventinfo.removedInfo[property]);
                    
                }
                
            }
        }
        
    });
    
    on("change:repeating_moves", function(eventinfo){
    
        console.log(eventinfo.sourceAttribute.substring(39));
        
        var source = eventinfo.sourceAttribute.substring(39);
        var v;
        var update = {};
        
        console.log("repeating_moves_mk"+source);
        
        getAttrs(["repeating_moves_ml"+source, "repeating_moves_mlID"], function(values){
            v = values["repeating_moves_ml"+source];
            
            console.log(v);
            
            console.log(values["repeating_moves_mlID"]);
            
            if(values["repeating_moves_mlID"] != "" && values["repeating_moves_mlID"] != null){
               
                console.log("repeating_movesKnown_" + values["repeating_moves_mlID"] + "_mk" + source);
                
                update["repeating_movesKnown_" + values["repeating_moves_mlID"] + "_mk" + source] = v;
               
            }
            setAttrs(update);
        });
        
    
    });
   
    
    // Change Character Mode
    on("change:chartype", function() {
        getAttrs(["Chartype"], function(values) {
            setAttrs({
                Chartype_dup: values.Chartype
            });
        });
    });
    
    // ReCalc HP on Mode change
    on("change:chartype_dup", function() {
        getAttrs(["Chartype_dup"], function(values) {
            setAttrs({
                Chartype: values.Chartype_dup
            });
        });
        hpCalc();
    });
    
    // Recalculate stats
    on("change:base_hp change:hp change:base_atk change:atk change:atk_stage change:base_def change:def change:def_stage change:base_spdef change:spdef change:spdef_stage change:base_spatk change:spatk change:spatk_stage  change:base_speed change:speed change:speed_stage", function() {
        statUp();
    });
    
    // Recalculate  Evasion
    on("change:def_total change:spdef_total change:speed_total change:eva", function() {
        evaUp();
    });
    
    // Recalculate HP on level or injury
    on("change:level change:chartype change:hp_total change:injuries", function() {
        hpCalc();
    });
    
    // Recalculate AP on level change
    on("change:level", function() {
        apCalc();
    });
    
    // Add marked moves to quicklist
    on("change:repeating_moves", function(){
        
    });
    
    // Add marked moves to quicklist
    on("change:repeating_moves:mlKnown", function(){
        
    });
    
    
    on("change:repeating_moves:mlDB", function() {
        update={};
        getAttrs(["repeating_moves_mlDB"], function(values) {
            //console.log("Works");
            db = parseInt(values["repeating_moves_mlDB"]) || 0;
            x = dbCalc(db);
            
            update["repeating_moves_mlDB_roll"] = "" + x.amount + "" + x.dice + " + " + x.bonus ;
            
            setAttrs(update);
        });
    });
    
    var addMoveSummary = function(){
        update={};
        
        getAttrs([""], function(){
                
        });
        
    }
    
    var dieBCalc = function(x){
        var mainBody = function(names,getlist){
        getAttrs(getlist,function(v){
            var setlist = [];
            for (var i=0; i < names.length; i++){
                if (!v.hasOwnProperty(names[i]+"Type")){
                    setlist.push(i);
                }
            }
            for (var i=setlist.length;i>0;i--){
                names.splice(setlist[i-1],1)
            }
            setlist = {};
            for (var i=0;i<names.length;i++){
                setlist[names[i]+"diebonus"]="";
            }
            if (v.adaptn==1){
                for (var i=0;i<names.length;i++){
                    if (v.STAB.indexOf(v[names[i]+"Type"].toUpperCase())!==-1){
                        setlist[names[i]+"diebonus"]=setlist[names[i]+"diebonus"]+"1d10+";
                    }
                }
            }
            if (v.damp==1){
                for (var i=0;i<names.length;i++){
                    if (v[names[i]+"Type"].toUpperCase()=="WATER"){
                        setlist[names[i]+"diebonus"]=setlist[names[i]+"diebonus"]+"1d10+";
                    }
                }
            }
            if (v.defeat==1){
                if (v.HitPoints/v.HitPoints_permmax>1/2){
                    for (var i=0;i<names.length;i++){
                        setlist[names[i]+"diebonus"]=setlist[names[i]+"diebonus"]+"2d6+";
                    }
                }
            }
            for (var i=0;i<names.length;i++){
                if (setlist[names[i]+"diebonus"]==""){
                    setlist[names[i]+"diebonus"]=0;
                } else{
                    setlist[names[i]+"diebonus"]=setlist[names[i]+"diebonus"].substring(0,setlist[names[i]+"diebonus"].length-1);
                }
            }
            setAttrs(setlist);
        });}
        var getlist;
        var names;
        if (x.sourceAttribute.indexOf("_type")!==-1){
            getlist=[x.sourceAttribute.charAt(0).toUpperCase()+x.sourceAttribute.slice(1,x.sourceAttribute.indexOf("type"))+"Type","STAB","adaptn","HitPoints","HitPoints_permmax","damp","defeat"];
            names = x.sourceAttribute.substring(0,x.sourceAttribute.indexOf("type"));
            names = [names.charAt(0).toUpperCase()+names.slice(1)];
        } else {
            getlist=["Move1_Type","Move2_Type","Move3_Type","Move4_Type","Move5_Type","Move6_Type","STAB","adaptn","HitPoints","HitPoints_permmax","damp","defeat"];
            names = ["Move1_","Move2_","Move3_","Move4_","Move5_","Move6_"];
        }
        if (names.length > 1){
            getSectionIDs("repeating_moves", function(idarray) {
                for(var i=0; i < idarray.length; i++) {
                    getlist.push("repeating_moves_"+idarray[i]+"_Move_Type");
                    names.push("repeating_moves_"+idarray[i]+"_Move_");
                }
                mainBody(names,getlist);
            });
        } else {
            mainBody(names,getlist);
        }
    }

    var bonCalc = function(x) {
        var mainBody = function(names, getlist){
        getAttrs(getlist, function(v) {
            var setlist = [];
            for (var i=0; i < names.length; i++){
                if (!v.hasOwnProperty(names[i]+"Type")){
                    setlist.push(i);
                }
            }
            for (var i=setlist.length;i>0;i--){
                names.splice(setlist[i-1],1)
            }
            setlist = {};
            for (i=0;i<names.length;i++){
                setlist[names[i]+"dam_B_t"]=v.dam_B;
            }
            if (v.lastctrue==1){
                if (v.HitPoints/v.HitPoints_permmax<1/3){
                    for (var i=0;i<names.length;i++){
                        if (v.lastctype.toUpperCase().indexOf(v[names[i]+"Type"].toUpperCase())!==-1){
                            setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+10;
                        }
                    }
                } else {
                    for (var i=0;i<names.length;i++){
                        if (v.lastctype.toUpperCase().indexOf(v[names[i]+"Type"].toUpperCase())!==-1){
                            setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+5;
                        }
                    }
                }
            }
            if (v.aurastn==1){
                for (var i=0;i<names.length;i++){
                    setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+3*v.Injuries;
                } 
            } 
            if (v.typeatrue==1){
                for (var i=0;i<names.length;i++){
                    if (v.typeatype.toUpperCase().indexOf(v[names[i]+"Type"].toUpperCase())!==-1){
                        setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+5;
                    }
                }
            }
            if (v.flashfire==1){
                for (var i=0;i<names.length;i++){
                    if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                        setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+5;
                    }
                }
            }
            if (v.courage==1){
                if (v.HitPoints/v.HitPoints_permmax<=1/3){
                    for (var i=0;i<names.length;i++){
                        setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+5;
                    }
                }
            }
            if (v.hustle==1){
                for (var i=0;i<names.length;i++){
                    setlist[names[i]+"dam_B_t"]=setlist[names[i]+"dam_B_t"]+10;
                }
            }
            setAttrs(setlist);
        });
        }
        var getlist;
        var names;
        if (x.sourceAttribute.indexOf("_type")!==-1){
            getlist=["dam_B",x.sourceAttribute.charAt(0).toUpperCase()+x.sourceAttribute.slice(1,x.sourceAttribute.indexOf("type"))+"Type","lastctrue","lastctype","HitPoints","HitPoints_permmax","flashfire","typeatrue","typeatype","aurastn","Injuries","Courage","hustle"];
            names = x.sourceAttribute.substring(0,x.sourceAttribute.indexOf("type"));
            names = [names.charAt(0).toUpperCase()+names.slice(1)];
        } else {
            getlist=["dam_B","Struggle_Type","Move1_Type","Move2_Type","Move3_Type","Move4_Type","Move5_Type","Move6_Type","lastctrue","lastctype","HitPoints","HitPoints_permmax","flashfire","typeatrue","typeatype","aurastn","Injuries","Courage","hustle"];
            names = ["Struggle_","Move1_","Move2_","Move3_","Move4_","Move5_","Move6_"];
        }
        if (names.length > 1){
            getSectionIDs("repeating_moves", function(idarray) {
                for(var i=0; i < idarray.length; i++) {
                    getlist.push("repeating_moves_"+idarray[i]+"_Move_Type");
                    names.push("repeating_moves_"+idarray[i]+"_Move_");
                }
                mainBody(names,getlist);
            });
        } else {
            mainBody(names,getlist);
        }
    }
    
    var modCalc = function(x) {
        var mainBody = function(names,getlist){
        getAttrs(getlist, function(v) {
            var setlist = [];
            for (var i=0; i < names.length; i++){
                if (!v.hasOwnProperty(names[i]+"Type")){
                    setlist.push(i);
                }
            }
            for (var i=setlist.length;i>0;i--){
                names.splice(setlist[i-1],1);
            }
            setlist = {};
            if (v.incandn==1){
                if (v.weird==1&&v.twist==1){
                    var weird = {};
                    if (v.ATK_total>v.SPATK_total){
                        weird.p = 0;
                        weird.s = 1;
                    } else if (v.ATK_total<v.SPATK_total){
                        weird.p = 1;
                        weird.s = 0;
                    } else {
                        weird.p = 0;
                        weird.s = 0;
                    }
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=2;
                            setlist[names[i]+"smod"]=2;
                        } else {
                            setlist[names[i]+"pmod"]=1+weird.p;
                            setlist[names[i]+"smod"]=1+weird.s;
                        }
                    }
                } else if (v.weird==1){
                    var weird = {};
                    if (v.ATK_total>v.SPATK_total){
                        weird.p = 0
                        weird.s = 1
                    } else if (v.ATK_total<v.SPATK_total){
                        weird.p = 1
                        weird.s = 0
                    } else {
                        weird.p = 0
                        weird.s = 0
                    }
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=1+weird.p;
                            setlist[names[i]+"smod"]=1+weird.s;
                        } else {
                            setlist[names[i]+"pmod"]=2*weird.p;
                            setlist[names[i]+"smod"]=2*weird.s;
                        }
                    }
                } else if (v.twist==1){
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=2;
                            setlist[names[i]+"smod"]=2;
                        } else {
                            setlist[names[i]+"pmod"]=1;
                            setlist[names[i]+"smod"]=1;
                        }
                    }
                } else {
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=1;
                            setlist[names[i]+"smod"]=1;
                        } else {
                            setlist[names[i]+"pmod"]=0;
                            setlist[names[i]+"smod"]=0;
                        }
                    }
                }
            } else if (v.incando==1){
                if (v.weird==1&&v.twist==1){
                    var weird = {};
                    if (v.ATK_total>v.SPATK_total){
                        weird.p = 0
                        weird.s = 1
                    } else if (v.ATK_total<v.SPATK_total){
                        weird.p = 1
                        weird.s = 0
                    } else {
                        weird.p = 0
                        weird.s = 0
                    }
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=2;
                            setlist[names[i]+"smod"]=2;
                        } else {
                            setlist[names[i]+"pmod"]=1+weird.p;
                            setlist[names[i]+"smod"]=1+weird.s;
                        }
                    }
                } else if (v.weird==1){
                    var weird = {};
                    if (v.ATK_total>v.SPATK_total){
                        weird.p = 0
                        weird.s = 1
                    } else if (v.ATK_total<v.SPATK_total){
                        weird.p = 1
                        weird.s = 0
                    } else {
                        weird.p = 0
                        weird.s = 0
                    }
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=2;
                            setlist[names[i]+"smod"]=2;
                        } else {
                            setlist[names[i]+"pmod"]=2*weird.p;
                            setlist[names[i]+"smod"]=2*weird.s;
                        }
                    }
                } else if (v.twist==1){
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=2;
                            setlist[names[i]+"smod"]=2;
                        } else {
                            setlist[names[i]+"pmod"]=1;
                            setlist[names[i]+"smod"]=1;
                        }
                    }
                } else {
                    for (var i=0; i < names.length; i++){
                        if (v[names[i]+"Type"].toUpperCase()=="FIRE"){
                            setlist[names[i]+"pmod"]=2;
                            setlist[names[i]+"smod"]=2;
                        } else {
                            setlist[names[i]+"pmod"]=0;
                            setlist[names[i]+"smod"]=0;
                        }
                    }
                }
            } else {
                if (v.weird==1&&v.twist==1){
                    var weird = {};
                    if (v.ATK_total>v.SPATK_total){
                        weird.p = 0
                        weird.s = 1
                    } else if (v.ATK_total<v.SPATK_total){
                        weird.p = 1
                        weird.s = 0
                    } else {
                        weird.p = 0
                        weird.s = 0
                    }
                    for (var i=0; i < names.length; i++){
                        setlist[names[i]+"pmod"]=1+weird.p;
                        setlist[names[i]+"smod"]=1+weird.s;
                    }
                } else if (v.weird==1){
                    var weird = {};
                    if (v.ATK_total>v.SPATK_total){
                        weird.p = 0
                        weird.s = 1
                    } else if (v.ATK_total<v.SPATK_total){
                        weird.p = 1
                        weird.s = 0
                    } else {
                        weird.p = 0
                        weird.s = 0
                    }
                    for (var i=0; i < names.length; i++){
                        setlist[names[i]+"pmod"]=2*weird.p;
                        setlist[names[i]+"smod"]=2*weird.s;
                    }
                } else if (v.twist==1){
                    for (var i=0; i < names.length; i++){
                        setlist[names[i]+"pmod"]=1;
                        setlist[names[i]+"smod"]=1;
                    }
                } else {
                    for (var i=0; i < names.length; i++){
                        setlist[names[i]+"pmod"]=0;
                        setlist[names[i]+"smod"]=0;
                    }
                }
            }
            setAttrs(setlist);
        });
        }
        var getlist;
        var names;
        if (x.sourceAttribute.indexOf("_type")!==-1){
            getlist=[x.sourceAttribute.charAt(0).toUpperCase()+x.sourceAttribute.slice(1,x.sourceAttribute.indexOf("type"))+"Type","twist","weird","incando","incandn","ATK_total","SPATK_total"];
            names = x.sourceAttribute.substring(0,x.sourceAttribute.indexOf("type"));
            names = [names.charAt(0).toUpperCase()+names.slice(1)];
        } else {
            getlist = ["twist","weird","incando","incandn","ATK_total","SPATK_total","Move1_Type","Move2_Type","Move3_Type","Move4_Type","Move5_Type","Move6_Type","Struggle_Type"];
            names = ["Struggle_","Move1_","Move2_","Move3_","Move4_","Move5_","Move6_"];
        }
        if (names.length > 1){
            getSectionIDs("repeating_moves", function(idarray) {
                for(var i=0; i < idarray.length; i++) {
                    getlist.push("repeating_moves_"+idarray[i]+"_Move_Type");
                    names.push("repeating_moves_"+idarray[i]+"_Move_");
                }
                mainBody(names,getlist);
            });
        } else {
            mainBody(names,getlist);
        }
    }   
    
    var infoImport = function() {
        getAttrs(["input"], function (v) {
            var char = JSON.parse(v["input"]);
            var x; var t; var rmoves; var rcaps; var redges; var rabils; var rfeats; var i;
            
            getSectionIDs("repeating_moves", function(idarray) {
            rmoves = idarray;
            getSectionIDs("repeating_capabilities", function(idarray) {
            rcaps = idarray;
            getSectionIDs("repeating_edges", function(idarray) {
            redges = idarray;
            getSectionIDs("repeating_features", function(idarray) {
            rfeats = idarray;
            getSectionIDs("repeating_abilities", function(idarray) {
            rabils = idarray;
            
            if (rmoves==undefined){rmoves=[];}
            if (rcaps==undefined){rcaps=[];}
            if (redges==undefined){redges=[];}
            if (rfeats==undefined){rfeats=[];}
            if (rabils==undefined){rabils=[];}
            
            for (var property in char) {
                if (char.hasOwnProperty(property)) {
                    if (property.match(/Move\d/g)!=null) {
                        
                        t = {};
                        i=generateRowID();
                        
                        for (var prop in char[property]){
                            if (char[property].hasOwnProperty(prop)){
                                
                                
                                x = "repeating_moves_" + i + "_ml";
                                //t[x] = char[property][prop];
                                
                                
                                switch(prop){
                                    case "Name":
                                        t[x + "Name"] = char[property][prop];
                                        console.log(char[property][prop]);
                                        break;
                                    case "Type":
                                        t[x + "Type"] = char[property][prop];
                                        break;
                                    case "Freq":
                                        list = char[property][prop].match(/([a-wyz\-]+)(\s*[x]\s*)?(\d+)?/i);
                                        if(list.length <= 2){
                                            // has no use count
                                            t[x + "Frequency"] = list[1];
                                        }else if(list.length < 4){
                                            //number missing
                                            t[x + "Frequency"] = list[1];
                                            t[x + "Uses_max"] = 1;
                                        }else{
                                            // frequesncy and uses
                                            t[x + "Frequency"] = list[1];
                                            t[x + "Uses_max"] = list[3];
                                        }
                                        
                                        break;
                                    case "AC":
                                        t[x + "AC"] = parseInt(char[property][prop])||0;
                                        break;
                                    case "DB":
                                        t[x + "DB"] = parseInt(char[property][prop])||0;
                                        break;
                                    case "DType":
                                        t[x + "Cat"] = char[property][prop];
                                        break;
                                    case "Range":
                                        t[x + "Range"] = char[property][prop];
                                        break;
                                    case "Effects":
                                        t[x + "Effects"] = char[property][prop];
                                        break;
                                    case "Contest Type":
                                        t[x + "ContestEffect"] = char[property][prop];
                                        break;
                                    case "Contest Effect":
                                        t[x + "ContestType"] = char[property][prop];
                                        break;
                                    default:
                                        break;
                                }
                                
                            }
                        }
                        setAttrs(t);
                        
                    } else if (property.match(/Feature\d/g)!=null) {
                        i = Number(property.substring(7));
                        t = {};
                        if (i<2){
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "Feature".concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        } else if (i<2+rfeats.length){
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "repeating_features_".concat(rfeats[i-2]).concat("_Feature_").concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        } else {
                            i=generateRowID();
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "repeating_features_".concat(i).concat("_Feature_").concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        }
                    } else if (property.match(/Ability\d/g)!=null) {
                        i = Number(property.substring(7));
                        t = {};
                        if (i<2){
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "Ability".concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        } else if (i<2+rabils.length){
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "repeating_abilities_".concat(rabils[i-2]).concat("_Ability_").concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        } else {
                            i=generateRowID();
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "repeating_abilities_".concat(i).concat("_Ability_").concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        }
                    } else if (property.match(/Edge\d/g)!=null) {
                        i = Number(property.substring(4));
                        t = {};
                        if (i<=redges.length){
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "repeating_edges_".concat(redges[i-1]).concat("_Edge").concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        } else {
                            i=generateRowID();
                            for (var prop in char[property]){
                                if (char[property].hasOwnProperty(prop)){
                                    x = "repeating_edges_".concat(i).concat("_Edge").concat(prop);
                                    t[x] = char[property][prop];
                                }
                            }
                            setAttrs(t);
                        }
                    } 
                    else if (property=="Capabilities"){
                        x = 0;
                        for (var prop in char[property]) {
                            if (char[property].hasOwnProperty(prop)) {
                                if (prop=="Overland"||prop=="Swim"||prop=="HJ"||prop=="LJ"||prop=="Power") {
                                    t={};
                                    t[prop]=char[property][prop];
                                    setAttrs(t);
                                }  else if (Number.isInteger(char[property][prop])){
                                    t={};
                                    if (x<rcaps.length-1) {
                                        t["repeating_capabilities_".concat(rcaps[x]).concat("_Capability")]=prop;
                                        t["repeating_capabilities_".concat(rcaps[x]).concat("_Capability_Rank")]=char[property][prop];
                                        setAttrs(t);
                                    } else {
                                        i=generateRowID();
                                        t["repeating_capabilities_".concat(i).concat("_Capability")]=prop;
                                        t["repeating_capabilities_".concat(i).concat("_Capability_Rank")]=char[property][prop];
                                        setAttrs(t);
                                    }
                                    x++;
                                } else {
                                    t={};
                                    if (x<rcaps.length-1) {
                                        t["repeating_capabilities_".concat(rcaps[x]).concat("_Capability")]=prop;
                                        setAttrs(t);
                                    } else {
                                        i=generateRowID();
                                        t["repeating_capabilities_".concat(i).concat("_Capability")]=prop;
                                        setAttrs(t);
                                    }
                                    x++;
                                }
                            }
                        }
                    } else {
                        t={};
                        t[property]=char[property];
                        setAttrs(t);}
                }
            }
            });});});});});
        });
    };

    var statUp = function(){
        getAttrs(["base_HP","HP","base_ATK","ATK","ATK_Stage","base_DEF","DEF","DEF_Stage","base_SPATK","SPATK","SPATK_Stage","base_SPDEF","SPDEF","SPDEF_Stage","base_SPEED","SPEED","SPEED_Stage"], function(v) {
        setAttrs({
          HP_total: 1*v.base_HP + 1*v.HP,
          ATK_total: Math.floor((1*v.base_ATK + 1*v.ATK)*v.ATK_Stage),
          DEF_total: Math.floor((1*v.base_DEF*1 + v.DEF*1)*v.DEF_Stage),
          SPATK_total: Math.floor((1*v.base_SPATK + 1*v.SPATK)*v.SPATK_Stage),
          SPDEF_total: Math.floor((1*v.base_SPDEF + 1*v.SPDEF)*v.SPDEF_Stage),
          SPEED_total: Math.floor((v.base_SPEED*1 + v.SPEED*1)*v.SPEED_Stage)
        });
        });
    };
    
    var evaUp = function () {
        getAttrs(["DEF_total","SPDEF_total","SPEED_total", "Eva"], function(v) {
        def = Math.min(Math.floor(v["DEF_total"]/5),6);
        sdef = Math.min(Math.floor(v["SPDEF_total"]/5),6);
        speed = Math.min(Math.floor(v["SPEED_total"]/5),6);
        eva = v["Eva"];
        setAttrs({
          PE: def,
          PEB: eva,
          PhysEvade: Math.min(def*1 + eva*1,9),
          ScE: sdef,
          ScEB: eva,
          SpecEvade: Math.min(sdef*1 + eva*1,9),
          SpE: speed,
          SpEB: eva,
          SpeedEvade: Math.min(speed*1 + eva*1,9)
        });
        });
    }; 
    
    var hpCalc = function (){
        getAttrs(["Level","CharType","HP_Total", "Injuries"], function(v) {
            x = Math.floor(v.Level*(1*v.CharType + 1) + v.HP_Total*3 + 10);
            setAttrs({
                HitPoints_max:Math.floor(x * (1-1*v.Injuries/10)),
                HitPoints_permmax:x,
                a75_hp:Math.floor(x*0.75),
                a50_hp:Math.floor(x*0.5),
                a25_hp:Math.floor(x*0.25),
                a13_hp:Math.floor(x*(1/3)),
                a16_hp:Math.floor(x*(1/6)),
                a18_hp:Math.floor(x*(1/8)),
                a110_hp:Math.floor(x*(1/10)),
                a116_hp:Math.floor(x*(1/16))
            });
        });
    };
    
    var apCalc = function (){
        getAttrs(["Level"], function(v) {
            x = Math.floor(v.Level/5)+5;
            setAttrs({
                AP_max:x
            });
        });
    };
    
    var dbCalc = function (v){
        if (isNaN(v)){
            return {amount:"0",dice:"d0",bonus:"0"};
        } else if (v>14){
            if (v>21){
                if (v>24){
                    if (v>26){
                        if (v==27) {
                            return {amount:8,dice:"d12",bonus:70};
                        } else {
                            return {amount:8,dice:"d12",bonus:80};
                        }
                    } else {   
                        if (v==25) {
                            return {amount:6,dice:"d12",bonus:60};
                        } else {
                            return {amount:7,dice:"d12",bonus:65};
                        }
                    }
                } else {
                    if (v==22){
                        return {amount:6,dice:"d12",bonus:45};
                    } else if (v==23) {
                        return {amount:6,dice:"d12",bonus:50};
                    } else {
                        return {amount:6,dice:"d12",bonus:55};
                    }
                }
            } else {
                if (v>17){
                    if (v>19){
                        if (v==20) {
                            return {amount:6,dice:"d12",bonus:35};
                        } else {
                            return {amount:6,dice:"d12",bonus:40};
                        }
                    } else {
                        if (v==18) {
                            return {amount:6,dice:"d12",bonus:25};
                        } else {
                            return {amount:6,dice:"d12",bonus:30};
                        }
                    }
                } else {
                    if (v==15) {
                        return {amount:4,dice:"d10",bonus:20};
                    } else if (v==16) {
                        return {amount:5,dice:"d10",bonus:20};
                    } else {
                        return {amount:5,dice:"d12",bonus:25};
                    }
                }
            }
        } else {
            if (v>7){
                if (v>10){
                    if (v>12){
                        if (v==13) {
                            return {amount:4,dice:"d10",bonus:10};
                        } else {
                            return {amount:4,dice:"d10",bonus:15};
                        }
                    } else {
                        if (v==11) {
                            return {amount:3,dice:"d10",bonus:10};
                        } else {
                            return {amount:3,dice:"d12",bonus:10};
                        }
                    }
                } else {
                    if (v==8) {
                        return {amount:2,dice:"d8",bonus:10};
                    } else if (v==9) {
                        return {amount:2,dice:"d10",bonus:10};
                    } else {
                        return {amount:3,dice:"d8",bonus:10};
                    }
                }
            } else {
                if (v>3){
                    if (v>5){
                        if (v==6) {
                            return {amount:2,dice:"d6",bonus:8};
                        } else {
                            return {amount:2,dice:"d6",bonus:10};
                        }
                    } else {
                        if (v==4){
                            return {amount:1,dice:"d8",bonus:6};
                        } else {
                            return {amount:1,dice:"d8",bonus:8};
                        }    
                    }
                } else {
                    if (v==1) {
                        return {amount:1,dice:"d6",bonus:1};
                    } else if (v==2) {
                        return {amount:1,dice:"d6",bonus:3};
                    } else {
                        return {amount:1,dice:"d6",bonus:5};
                    }
                }
            }
        }
    };
    
</script>
<rolltemplate class="sheet-rolltemplate-PTU">
    <table>
        {{^title}}
        {{^dis}}
        {{^skill}}
            <tr><th colspan="2">{{nick}} uses<br/>{{name}}!</th></tr>
            {{#AC}}
            {{^phy}}
            {{^spec}}
            {{^status}}
                <tr><td colspan="2"><span class="tcat">AC: </span>{{AR}} ≥ {{AC}} + Target Evasion</td></tr>
                <tr><td colspan="2"><span class="tcat">Crits On: </span>{{critsOn}}+</td></tr>
            {{/status}}
            {{#status}}
                {{#rollGreater() AR status}}
                <tr><td class="sheet-hit" colspan="2">Hit!</td></tr>
                {{/rollGreater() AR status}}
                {{#rollTotal() AR status}}
                <tr><td class="sheet-hit" colspan="2">Hit!</td></tr>
                {{/rollTotal() AR status}}
                {{#rollLess() AR status}}
                <tr><td class="sheet-miss" colspan="2">Miss!</td></tr>
                {{/rollLess() AR status}}
                <tr><td colspan="2"><span class="tcat">AC: </span>{{AR}} ≥ {{AC}} + Target Evasion</td></tr>
            {{/status}}
            {{/spec}}
            {{#spec}}
                {{#rollGreater() AR spec}}
                <tr><td class="sheet-hit" colspan="2">Hit!</td></tr>
                {{/rollGreater() AR spec}}
                {{#rollTotal() AR spec}}
                <tr><td class="sheet-hit" colspan="2">Hit!</td></tr>
                {{/rollTotal() AR spec}}
                {{#rollLess() AR spec}}
                <tr><td class="sheet-miss" colspan="2">Miss!</td></tr>
                {{/rollLess() AR spec}}
                <tr><td colspan="2"><span class="tcat">AC: </span>{{AR}} ≥ {{AC}} + Target Evasion</td></tr>
            {{/spec}}
            {{/phy}}
            {{#phy}}
                {{#rollGreater() AR phy}}
                <tr><td class="sheet-hit" colspan="2">Hit!</td></tr>
                {{/rollGreater() AR phy}}
                {{#rollTotal() AR phy}}
                <tr><td class="sheet-hit" colspan="2">Hit!</td></tr>
                {{/rollTotal() AR phy}}
                {{#rollLess() AR phy}}
                <tr><td class="sheet-miss" colspan="2">Miss!</td></tr>
                {{/rollLess() AR phy}}
                <tr><td colspan="2"><span class="tcat">AC: </span>{{AR}} ≥ {{AC}} + Target Evasion</td></tr>
            {{/phy}}
            {{/AC}}
            {{^AC}}
                <tr><td colspan="2"><span class="tcat">AC: </span>No Check</td></tr>
            {{/AC}}
            <tr><td colspan="2"><span class="tcat">Type: </span>{{Type}}</td></tr>
            <tr><td colspan="2"><span class="tcat">Frequency: </span>{{Frequency}}</td></tr>
            {{#damage}}
            {{^damage2}}
                <tr>
                    <td><span class="tcat">Damage: </span>{{damage}}</td><td><span class="tcat">Crit: </span>{{dmgcrit}}</td>
                </tr>
           {{/damage2}}
            {{#damage2}}
            {{^damage3}}
                <tr>
                    <td colspan="2"><span class="tcat">Second Damage Roll: </span>{{AR2}} ≥ {{AC2}} + Target Evasion</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (One Hit): </span>{{damage}}</td><td><span class="tcat"> Crit (Add into other Damage): </span>{{dmgcrit}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (Two Hits): </span>{{damage2}}</td><td><span class="tcat">Crit (Add into other Damage): </span>{{dmgcrit2}}</td>
                </tr>
            {{/damage3}}
            {{#damage3}}
            {{#roll}}
                <tr>
                    <td colspan="2"><span class="tcat">Roll for Number o' Hits: </span>{{roll}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (Roll = 1): </span>{{damage}}</td><td><span class="tcat">Crit: </span>{{dmgcrit}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (Roll = 2-3): </span>{{damage2}}</td><td><span class="tcat">Crit: </span>{{dmgcrit2}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (Roll = 4-6): </span>{{damage3}}</td><td><span class="tcat">Crit: </span>{{dmgcrit3}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (Roll = 7): </span>{{damage4}}</td><td><span class="tcat">Crit: </span>{{dmgcrit4}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Damage (Roll = 8): </span>{{damage5}}</td><td><span class="tcat">Crit: </span>{{dmgcrit5}}</td>
                </tr>
            {{/roll}}
            {{^roll}}
                <tr>
                    <td><span class="tcat">First Turn: </span>{{damage}}</td><td><span class="tcat">Crit: </span>{{dmgcrit}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Second Turn: </span>{{damage2}}</td><td><span class="tcat">Crit: </span>{{dmgcrit2}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Third Turn: </span>{{damage3}}</td><td><span class="tcat">Crit: </span>{{dmgcrit3}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Fourth Turn: </span>{{damage4}}</td><td><span class="tcat">Crit: </span>{{dmgcrit4}}</td>
                </tr>
                <tr>
                    <td><span class="tcat">Fifth+ Turn: </span>{{damage5}}</td><td><span class="tcat">Crit: </span>{{dmgcrit5}}</td>
                </tr>
            {{/roll}}
            {{/damage3}}
            {{/damage2}}
                <tr>
                    <td colspan="2"><span class="tcat">Damage Category: </span>{{dmgcat}}</td>
                </tr>
            {{/damage}}
            <tr>
                <td colspan="2"><span class="tcat">Range: </span>{{range}}</td>
            </tr>
            {{#effect}}
            <tr>
                <td colspan="2"><span class="tcat">Effect: </span>{{effect}}</td>
            </tr>
            {{/effect}}
        {{/skill}}
        {{#skill}}
            <tr><th colspan="2">{{nick}}:<br/>Rolling {{skill}}</th></tr>
            <tr><td colspan="2"><span class="tcat">Result: </span>{{SL}}</td></tr>
        {{/skill}}
        {{/dis}}
        {{#dis}}
            <tr><th colspan="2">{{dis}}:<br/>{{name}}</th></tr>
            <tr><td colspan="2"><span class="tcat">Frequency: </span>{{freq}}</td></tr>
            {{#tar}}
            <tr><td colspan="2"><span class="tcat">Target: </span>{{tar}}</td></tr>
            {{/tar}}
            <tr><td colspan="2"><span class="tcat">Description: </span>{{desc}}</td></tr>
        {{/dis}}
        {{/title}}
        {{#title}}
        <tr><th colspan="2">{{title}}</th></tr>
        {{#allprops() title Message}}
            <tr><td class='sheet-table-header'>{{key}}</td><td>{{value}}</td></tr>
        {{/allprops() title Message}}
        {{/title}}
    </table>
</rolltemplate>

<input class='sheet-shortfield' name='attr_character_sheet' value='PTUv2' type='hidden'/>

<div class="sheet-center-img">
    <img src="http://i.imgur.com/Dm0WdCu.png" alt="PTU v1.05" />
</div>

<!-- Old Tabs -->
<div class="sheet-oldtab-group">
    <div class="sheet-oldtab">
        <input type="radio" name="attr_tab" class="sheet-oldtab sheet-oldtab1" value="1"  checked="checked" />
        <span title="Traditional Page"></span>
    </div>
    <!--div class="sheet-oldtab">
        <input type="radio" name="attr_tab" class="sheet-oldtab sheet-oldtab2" value="2"  />
        <span title="Tabbed Page"></span>
    </div-->
    <div class="sheet-oldtab">
        <input type="radio" name="attr_tab" class="sheet-oldtab sheet-oldtab3" value="3" />
        <span title="Roll Page" ></span>
    </div>
    <div class="sheet-oldtab">
        <input type="radio" name="attr_tab" class="sheet-oldtab sheet-oldtab4" value="4" />
        <span title="Import Page" ></span>
    </div>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <span>
        <div class="sheet-oldtab">
            <input type="radio" name="attr_whisper" class="sheet-oldtab" value=" " />
            <span title="Public" ></span>
        </div>
        <div class="sheet-oldtab">
            <input type="radio" name="attr_whisper" class="sheet-oldtab" value="/w gm " checked="checked"/>
            <span title="GM" ></span>
        </div>
    </span>
    &nbsp;&nbsp;&nbsp;&nbsp;
    <span>
        <div class="sheet-oldtab">
            <input type="radio" name="attr_target" class="sheet-oldtab" value="0" checked="checked"/>
            <span title="Non-Targeted" ></span>
        </div>
        <div class="sheet-oldtab">
            <input type="radio" name="attr_target" class="sheet-oldtab" value="1" />
            <span title="Targeted" ></span>
        </div>
    </span>
    
</div>
<br />
<div>
    
    <div class="sheet-oldtab">
            <input type="radio" name="attr_CharType" class="sheet-oldtab" value="0" checked="checked"/>
            <span title="Trainer" ></span>
        </div>
        <div class="sheet-oldtab">
            <input type="radio" name="attr_CharType" class="sheet-oldtab" value="1" />
            <span title="Pokemon" ></span>
        </div>
</div>

<input type="hidden" name="attr_tab" class="sheet-oldtab" value="1" />
<input type="hidden" name="attr_target" class="sheet-targeted" />


<!--
<input type="radio" name="attr_target" value="0" checked /> Non-Targeted&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="radio" class="sheet-targeted" name="attr_target" value="1"/> Targeted
-->

<!-- Traditional -->
<div class="sheet-oldtab1">
    <div class="sheet-main-header">
        
    
        
    </div>
    <!-- Main -->
    <div class='sheet-2colrow'>
        <div class='sheet-col'>
            <h3 class="sheet-header">Basic Info</h3>
            
            <div class="sheet-table sheet-basic-info">
                <input type="hidden" name="attr_CharType" class="sheet-creature" value="0" />
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>Name</span>
                    </div><div style="width:70%">
                        <span><input type="text" name="attr_character_name" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row sheet-pokemon">
                    <div style="width:30%">
                        <span>Species</span>
                    </div><div style="width:70%">
                        <span><input type="text" name="attr_species" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row sheet-pokemon">
                    <div style="width:30%">
                        <span>Type</span>
                    </div><div style="width:30%">
                        <select style="width:100%" name='attr_type1'>
                            <option value="Untyped">-</option>
                        </select>
                    </div><div style="width:10%;text-align:center">
                        /
                    </div><div style="width:30%">
                        <select style="width:100%" name='attr_type2'>
                            <option value="Untyped">-</option>
                        </select>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%">
                        <span>Gender</span>
                    </div><div style="width:40%">
                        <span><input type="text" name="attr_gender" style="width:100%"\></span>
                    </div><div style="width:10%">
                        <span>Age</span>
                    </div><div style="width:20%">
                        <span><input type="number" name="attr_gender" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row sheet-trainer">
                    <div style="width:30%">
                        <span>Background</span>
                    </div><div style="width:60%">
                        <span><input type="text" name="attr_gender" style="width:100%"\></span>
                    </div>
                    <div style="width:10%">
                        <span></span>
                    </div>
                    <div style="width:100%">
                        <span></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%">
                        <span>Level</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_level" style="width:100%" \></span>
                    </div>
                </div>
                
                <div class="sheet-row">
                    <div style="width:30%">
                        <span>EXP</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_exp" style="width:100%" \></span>
                    </div><div style="width:10%;text-align:center">
                        /
                    </div><div style="width:30%">
                        <span class="sheet-field" name="attr_exp_max" style="width:100%" >0</span>
                    </div>
                </div>
                <div class="sheet-row sheet-pokemon">
                    <div style="width:30%">
                        <span>Nature</span>
                    </div><div style="width:70%">
                        <span><input type="text" name="attr_nature" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row sheet-pokemon">
                    <div style="width:30%">
                        <span>Held Item</span>
                    </div><div style="width:70%">
                        <span><input type="text" name="attr_heldItem" \></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%">
                        <span>Height</span>
                    </div><div style="width:70%">
                        <span><input type="text" name="attr_height" \></span>
                    </div>
                
                    <div style="width:30%">
                        <span>Weight</span>
                    </div><div style="width:50%">
                        <span><input type="text" name="attr_weight" style="width:100%" \></span>
                    </div><div style="width:20%">
                        <span name="attr_weightClass" class="sheet-field" style="width:100%;display:inline-block;text-align:center" >0</span>
                    </div>
                </div>
                
                
                <div class="sheet-row sheet-trainer">
                    <div style="width:30%">
                        <span>AP</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_ap" style="width:100%" \></span>
                    </div><div style="width:10%;text-align:center">
                        /
                    </div><div style="width:30%">
                        <span class="sheet-field" name="attr_ap_max" style="width:100%" ></span>
                    </div>
                </div>
                <div class="sheet-row sheet-trainer">
                    <fieldset class="repeating_apCost">
                        <div class="sheet-ap-item ">
                            <div style="width:30%">
                                <select name="attr_ap_reason" style="width:100%">
                                    <option>Spent</option>
                                    <option>Drained</option>
                                    <option>Bound</option>
                                </select>
                            </div><div style="width:20%">
                                <input type="number" name="attr_ap_cost" style="width:100%"/>    
                            </div><div style="width:50%">
                                <input type="text" name="attr_ap_descr" style="width:100%"/>    
                            </div>
                            
                        </div>
                    </fieldset>
                </div>
            </div>
            
            <br />
            <h3 class="sheet-header">Stats</h3>
            <table class='sheet-table'>
                <tr>
                    <th>Stat</th>
                    <th>Base Stat</th>
                    <th>Allocated</th>
                    <th>Combat Stage</th>
                    <th>Current</th>
                </tr>
                <tr>
                    <td class='sheet-table-header'>HP</td>
                    <td align="center"><input type='number' name='attr_base_HP' value = 0 ></td>
                    <td align='center'><input type='number' name='attr_HP' value = 0 ></td>
                    <td>&nbsp;</td>
                    <td align='center'><span class="sheet-field" name="attr_HP_total" style="width:100%" >0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>ATK</td>
                    <td align="center"><input type='number' name='attr_base_ATK' value = 0 ></td>
                    <td align='center'><input type='number' name='attr_ATK' value = 0 ></td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_ATK_Stage'>
                        <option value='0.4'>-6</option>
                        <option value='0.5'>-5</option>
                        <option value='0.6'>-4</option>
                        <option value='0.7'>-3</option>
                        <option value='0.8'>-2</option>
                        <option value='0.9'>-1</option>
                        <option value='1' selected>0</option>
                        <option value='1.2'>1</option>
                        <option value='1.4'>2</option>
                        <option value='1.6'>3</option>
                        <option value='1.8'>4</option>
                        <option value='2'>5</option>
                        <option value='2.2'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_ATK_total"  >0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>DEF</td>
                    <td align="center"><input type='number' name='attr_base_DEF' value = 0 ></td>
                    <td align='center'><input type='number' name='attr_DEF' value = 0 ></td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_DEF_Stage'>
                        <option value='0.4'>-6</option>
                        <option value='0.5'>-5</option>
                        <option value='0.6'>-4</option>
                        <option value='0.7'>-3</option>
                        <option value='0.8'>-2</option>
                        <option value='0.9'>-1</option>
                        <option value='1' selected>0</option>
                        <option value='1.2'>1</option>
                        <option value='1.4'>2</option>
                        <option value='1.6'>3</option>
                        <option value='1.8'>4</option>
                        <option value='2'>5</option>
                        <option value='2.2'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_DEF_total">0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>SPATK</td>
                    <td align="center"><input type='number' name='attr_base_SPATK' value = 0 ></td>
                    <td align='center'><input type='number' name='attr_SPATK' value = 0 ></td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_SPATK_Stage'>
                        <option value='0.4'>-6</option>
                        <option value='0.5'>-5</option>
                        <option value='0.6'>-4</option>
                        <option value='0.7'>-3</option>
                        <option value='0.8'>-2</option>
                        <option value='0.9'>-1</option>
                        <option value='1' selected>0</option>
                        <option value='1.2'>1</option>
                        <option value='1.4'>2</option>
                        <option value='1.6'>3</option>
                        <option value='1.8'>4</option>
                        <option value='2'>5</option>
                        <option value='2.2'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_SPATK_total">0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>SPDEF</td>
                    <td align="center"><input type='number' name='attr_base_SPDEF' value = 0 ></td>
                    <td align='center'><input type='number' name='attr_SPDEF' value = 0 ></td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_SPDEF_Stage'>
                        <option value='0.4'>-6</option>
                        <option value='0.5'>-5</option>
                        <option value='0.6'>-4</option>
                        <option value='0.7'>-3</option>
                        <option value='0.8'>-2</option>
                        <option value='0.9'>-1</option>
                        <option value='1' selected>0</option>
                        <option value='1.2'>1</option>
                        <option value='1.4'>2</option>
                        <option value='1.6'>3</option>
                        <option value='1.8'>4</option>
                        <option value='2'>5</option>
                        <option value='2.2'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_SPDEF_total">0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>SPEED</td>
                    <td align="center"><input type='number' name='attr_base_SPEED' value = 0 ></td>
                    <td align='center'><input type='number' name='attr_SPEED' value = 0 ></td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_SPEED_Stage'>
                        <option value='0.4'>-6</option>
                        <option value='0.5'>-5</option>
                        <option value='0.6'>-4</option>
                        <option value='0.7'>-3</option>
                        <option value='0.8'>-2</option>
                        <option value='0.9'>-1</option>
                        <option value='1' selected>0</option>
                        <option value='1.2'>1</option>
                        <option value='1.4'>2</option>
                        <option value='1.6'>3</option>
                        <option value='1.8'>4</option>
                        <option value='2'>5</option>
                        <option value='2.2'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_SPEED_total">0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Accuracy Bonus</td>
                    <td align="center">&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_Acc'>
                        <option value='-6'>-6</option>
                        <option value='-5'>-5</option>
                        <option value='-4'>-4</option>
                        <option value='-3'>-3</option>
                        <option value='-2'>-2</option>
                        <option value='-1'>-1</option>
                        <option value='0' selected>0</option>
                        <option value='1'>1</option>
                        <option value='2'>2</option>
                        <option value='3'>3</option>
                        <option value='4'>4</option>
                        <option value='5'>5</option>
                        <option value='6'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_Acc_red">0</span></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Evasion Bonus</td>
                    <td align="center">&nbsp;</td>
                    <td align='center'>&nbsp;</td>
                    <td align='center'><select class='sheet-shortfield2' name='attr_Eva'>
                        <option value='-6'>-6</option>
                        <option value='-5'>-5</option>
                        <option value='-4'>-4</option>
                        <option value='-3'>-3</option>
                        <option value='-2'>-2</option>
                        <option value='-1'>-1</option>
                        <option value='0' selected>0</option>
                        <option value='1'>1</option>
                        <option value='2'>2</option>
                        <option value='3'>3</option>
                        <option value='4'>4</option>
                        <option value='5'>5</option>
                        <option value='6'>6</option>
                    </select></td>
                    <td align='center'><span class="sheet-field" style="width:100%" name="attr_Eva_red">0</span></td>
                </tr>
                <tr>
                    <td colspan="2" class='sheet-table-header'>Damage Bonus/Penalty:</td>
                    <td align="center">&nbsp;</td>
                    <td align="center">&nbsp;</td>
                    <td align="center"><input type='number' value='0' name='attr_dam_B'/></td>
                </tr>
                <tr>
                    <td colspan="2" class='sheet-table-header'>Damage Resistance:</td>
                    <td align="center">&nbsp;</td>
                    <td align="center">&nbsp;</td>
                    <td align="center"><input type='number' value='0' name='attr_dam_R'/></td>
                </tr>
                <tr>
                    <td colspan="3" class='sheet-table-header'>Add Initiative (Select Token First!):</td>
                    <td align="center"><input type ='number' value = '0' name='attr_init_bonus'></td>
                    <td align="center"><button type='roll' value='@{selected|token_name} has [[@{selected|SPEED_Total}+@{selected|init_bonus}+?{Non-Speed modifier|0}&{tracker}]] speed.' name='roll_init' /></td>
                </tr>
            </table>
        </div>
        <div class='sheet-col'>
            
            <h3 class="sheet-header">HP</h3>
            
            <div class="sheet-table sheet-basic-info">
                <input type="hidden" name="attr_CharType" class="sheet-creature" value="0" />
                <div class="sheet-row">
                    <div style="width:50%">
                        <span>Temporary Hit Points</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_TempHitPoints" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:50%">
                        <span>Current Hit Point</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_HitPoints" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:50%">
                        <span>Current Max Hit Points</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_HitPoints_max" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:50%">
                        <span>Max Hit Points</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_HitPoints_permmax" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:50%">
                        <span>Injuries</span>
                    </div><div style="width:30%">
                        <span><input type="number" name="attr_Injuries" style="width:100%"\></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_injuries">
                        <div class="sheet-injury-item" >
                            <div style="display:inline-block;width:15%;" >
                                <input type="number" name="attr_injury_damage" style="width:100%" />
                            </div><div style="display:inline-block;width:10%;" >
                                
                            </div><div style="display:inline-block;width:70%" >
                                <input type="text" name="attr_injury_descr" style="width:100%" />
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            
            
            <br/>
            
            <h3 class='sheet-header'>HP Markers</h3>
            
            <div class="sheet-table sheet-basic-info">
                <div class="sheet-row">
                    <div style="width:25%">
                        <span>75%</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a75_hp" style="width:100%"></span>
                    </div><div style="width:10%">
                    </div><div style="width:25%">
                        <span>50%</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a50_hp" style="width:100%"></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:25%">
                        <span>25%</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a25_hp" style="width:100%"></span>
                    </div><div style="width:10%">
                    </div><div style="width:25%">
                        <span>1/3rd</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a13_hp" style="width:100%"></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:25%">
                        <span>1/6th</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a16_hp" style="width:100%"></span>
                    </div><div style="width:10%">
                    </div><div style="width:25%">
                        <span>1/8th</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a18_hp" style="width:100%"></span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:25%">
                        <span>1/10th (Tick)</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a110_hp" style="width:100%"></span>
                    </div><div style="width:10%">
                    </div><div style="width:25%">
                        <span>1/6th</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" name="attr_a116_hp" style="width:100%"></span>
                    </div>
                </div>
                    
            </div>
            
            <br />
            
            <h3 class="sheet-header">Evasions</h3>
            
            <div class="sheet-table sheet-basic-info">
                <div class="sheet-row">
                    <div style="width:30%">
                        Physical Evasion
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type='number' style="width:100%" name='attr_PEB' value="0"/>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" style="width:100%" name='attr_PhysEvade'>0</span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%">
                        Special Evasion
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type='number' style="width:100%" name='attr_ScEB' value="0"/>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" style="width:100%" name='attr_SpecEvade'>0</span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%">
                        <span>Speed Evasion</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type='number' style="width:100%" name='attr_SpEB' value="0" />
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span class="sheet-field" style="width:100%" name='attr_SpeedEvade'>0</span>
                    </div>
                </div>
            </div>
                
            <br />
            
            <h3 class="sheet-header">Capabilities</h3>
            
            <div class="sheet-table sheet-basic-info">
                <input type="hidden" name="attr_CharType" class="sheet-creature" value="0" />
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>Overland</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type="number" name="attr_Overland_bonus"  style="width:100%" value="0" />
                    </div><div style="width:20%">
                         <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span name="attr_Overland" style="width:100%" class="sheet-field">0</span>
                    </div>
                </div>
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>Swim</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type="number" name="attr_Swim_bonus"  style="width:100%" value="0" />
                    </div><div style="width:20%">
                         <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span name="attr_Swim" style="width:100%" class="sheet-field">0</span>
                    </div>
                </div>
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>Long Jump</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type="number" name="attr_LJ_bonus"  style="width:100%" value="0"  />
                    </div><div style="width:20%">
                         <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span name="attr_LJ" style="width:100%" class="sheet-field">0</span>
                    </div>
                </div>
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>High Jump</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type="number" name="attr_HJ_bonus"  style="width:100%" value="0"  />
                    </div><div style="width:20%">
                         <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span name="attr_HJ" style="width:100%" class="sheet-field">0</span>
                    </div>
                </div>
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>Power</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type="number" name="attr_Power_bonus"  style="width:100%" value="0"  />
                    </div><div style="width:20%">
                         <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span name="attr_Power" style="width:100%" class="sheet-field">0</span>
                    </div>
                </div>
                <div class="sheet-row ">
                    <div style="width:30%">
                        <span>Throw</span>
                    </div><div style="width:20%">
                        <span style="display:block;text-align:center">+</span>
                    </div><div style="width:10%">
                        <input type="number" name="attr_Throw_bonus"  style="width:100%" value="0"  />
                    </div><div style="width:20%">
                         <span style="display:block;text-align:center">=</span>
                    </div><div style="width:20%">
                        <span name="attr_Throw" style="width:100%" class="sheet-field">0</span>
                    </div>
                </div>
                <div class="sheet-row ">
                    <fieldset class="repeating_capabilities">
                        <div class="sheet-cap-item">
                            <div style="width:70%">
                                <input type="text" name="attr_Capability" />
                            </div><div style="width:10%"></div><div style="width:20%">
                                <input type="number" name="attr_Capability_Rank" />
                            </div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <h3 class="sheet-header">Status Conditions</h3>
            <h4 class='sheet-minihead'>Persistent Statuses</h4>
            <table class='sheet-table sheet-status-table'>
                <tr>
                    <td class='sheet-table-header'>Burned:</td>
                    <td><input type='checkbox' value=1 name='attr_st_burn'/></td>
                    <td class='sheet-table-header'>Frozen:</td>
                    <td><input type='checkbox' name='attr_st_froz'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Paralysis:</td>
                    <td><input type='checkbox' value=1 name='attr_st_para'/></td>
                    <td class='sheet-table-header'>Poisoned:</td>
                    <td><input type='checkbox' value=1 name='attr_st_pois'/></td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Volatile Statuses</h4>
            <table class='sheet-table sheet-status-table'>
                <tr>
                    <td class='sheet-table-header'>Bad Sleep:</td>
                    <td><input type='checkbox' value=1 name='attr_st_bads'/></td>
                    <td class='sheet-table-header'>Confused:</td>
                    <td><input type='checkbox' value=1 name='attr_st_conf'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Cursed:</td>
                    <td><input type='checkbox' value=1 name='attr_st_curs'/></td>
                    <td class='sheet-table-header'>Disabled:</td>
                    <td><input type='checkbox' value=1 name='attr_st_disa'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Rage:</td>
                    <td><input type='checkbox' value=1 name='attr_st_rage'/></td>
                    <td class='sheet-table-header'>Flinch:</td>
                    <td><input type='checkbox' value=1 name='attr_st_flin'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Infatuation:</td>
                    <td><input type='checkbox' value=1 name='attr_st_infa'/></td>
                    <td class='sheet-table-header'>Sleep:</td>
                    <td><input type='checkbox' value=1 name='attr_st_slee'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Suppressed:</td>
                    <td><input type='checkbox' value=1 name='attr_st_supp'/></td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Other Statuses</h4>
            <table class='sheet-table sheet-status-table'>
                <tr>
                    <td class='sheet-table-header'>Fainted:</td>
                    <td><input type='checkbox' value=1 name='attr_st_fain'/></td>
                    <td class='sheet-table-header'>Blindness:</td>
                    <td><input type='checkbox' value=1 name='attr_st_blin'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Total Blindness:</td>
                    <td><input type='checkbox' value=1 name='attr_st_tota'/></td>
                    <td class='sheet-table-header'>Slowed:</td>
                    <td><input type='checkbox' value=1 name='attr_st_slow'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Stuck:</td>
                    <td><input type='checkbox' value=1 name='attr_st_stuc'/></td>
                    <td class='sheet-table-header'>Trapped:</td>
                    <td><input type='checkbox' value=1 name='attr_st_trap'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Tripped:</td>
                    <td><input type='checkbox' value=1 name='attr_st_trip'/></td>
                    <td class='sheet-table-header'>Vulnerable:</td>
                    <td><input type='checkbox' value=1 name='attr_st_vuln'/></td>
                </tr>
            </table>
            <h4 class='sheet-minihead'>Custom Statuses</h4>
            <fieldset class='repeating_statuses'>
                <table class='sheet-table sheet-status-table'>
                    <td class="sheet-table-header"><input class='sheet-shortfield' type='text' name='attr_status_name1'/></td>
                    <td><input type='checkbox' value=1 name='attr_status_state1'/></td>
                    <td class="sheet-table-header"><input class='sheet-shortfield' type='text' name='attr_status_name2'/></td>
                    <td><input type='checkbox' value=1 name='attr_status_state2'/></td>
                </table>
            </fieldset>
        </div>
    </div>
    <br />
    
    <!-- Moves -->
    <div class="sheet-generic-rolls">
        <div class="sheet-table">
            <div class="sheet-row">
                <div style="width:10px;"></div>
                <div style="width:30px;">
                    <span>DB</span>
                </div>
                <div style="width:40px;">
                    <input type="number" name="attr_generic_db" value="4" min="0" style="width:100%"/>
                </div>
                <div style="width:70px;">
                    <span class="sheet-field" name="attr_generic_db_roll">1d8+6</span>
                </div>
                <div style="width:100px;">
                    <button type="roll" name="roll_generic_db" value="">Damage</button>
                </div>
                <div style="width:10px;"></div>
                <div style="width:100px;">
                    <button type="roll" name="roll_generic_accuracy" value="">Accuracy</button>
                </div>
                <div style="width:10px;"></div>
            </div>
        </div>
    </div>
    
    <h3 class="sheet-header">Known Moves</h3>
    
    <div class="sheet-movesKnown">
        
        <fieldset class="repeating_movesKnown">
            <input type="hidden" name="attr_mkID" />
            
            <div class="sheet-table sheet-moveKnown-item">
                <input type="hidden" name="attr_mkType" class="sheet-move-type" />
                <div class=" sheet-move-header">
                    <span name="attr_mkName" class="sheet-name">Name</span>
                    <span name="attr_mkFrequency" class="sheet-freq">Frequency</span>
                    
                    <input type="hidden" name="attr_mkFrequency" class="sheet-freq" value="Physical" />
                    <span class="sheet-uses">
                        <input type="number" name="attr_mkUses" />
                        <span>/</span>
                        <span name="attr_mkUses_max">0</span>
                    </span>
                </div>
                <div class="sheet-move-body">
                    <button type="roll" class="sheet-btn-accuracy"></button>
                    <button type="roll" class="sheet-btn-damage"></button>
                    <button type="roll" class="sheet-btn-show"></button>
                    <div class="">
                        <span>Range:</span><span name="attr_mkRange"></span>
                    </div>
                    <div class="">
                        <span name="attr_mkAC">AC</span> <span name="attr_mkCrit">Crit</span>
                    </div>
                    <div class="">
                        <span name="attr_mkDB">DB</span> <span name="attr_mkDB_roll">Roll</span>
                    </div>
                    <div class="">
                        <div style="width:50%">
                            
                        </div><div style="width:50%">
                            
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        
    </div>
    
    <h3 class="sheet-header">Move List</h3>
    
    <div class="sheet-movesList">
        
        <!-- Struggle -->
        <div class="sheet-table sheet-move-item">
                <input type="hidden" name="attr_struggleType" class="sheet-move-type" />
                <!-- Header -->
                <div class="sheet-row sheet-move-header" >
                    <div style="width:40%">
                        <span>Struggle</span>
                    </div><div style="width:25%">
                        <span class="sheet-move-freq">At-Will</span>
                    </div><div style="width:10%">
                    </div><div style="width:25%">
                        <select name="attr_struggleCat">
                            <option selected="selected">Physical</option>
                            <option>Special</option>
                            <option>Support</option>
                        </select>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%" class="sheet-move-side">
                        <div>
                            <select name="attr_struggleType">
                                <option value="Untyped" selected="selected">-</option>
                                <option>Normal</option>
                                <option>Bug</option>
                                <option>Dark</option>
                                <option>Dragon</option>
                                <option>Electric</option>
                                <option>Fairy</option>
                                <option>Fighting</option>
                                <option>Fire</option>
                                <option>Flying</option>
                                <option>Ghost</option>
                                <option>Grass</option>
                                <option>Ground</option>
                                <option>Ice</option>
                                <option>Poison</option>
                                <option>Psychic</option>
                                <option>Rock</option>
                                <option>Steel</option>
                                <option>Water</option>
                            </select>
                        </div>
                        <div>
                            <select name="attr_struggleContestType">
                                <option selected="selected">Cool</option>
                                <option >Tough</option>
                                <option >Beauty</option>
                                <option >Smart</option>
                                <option >Cute</option>
                            </select>
                        </div>
                        <div>
                            <input name="attr_struggleContestEffect" placeholder="Contest Effect"/>
                        </div>
                        
                        
                    </div><div style="width:70%" class="sheet-move-body" >
                        <div>
                            <span>Range: <input type="text" name="attr_struggleRange"  /></span>
                        </div>
                        <div>
                            <span>AC: <input type="number" name="attr_struggleAC" value="4" /></span>
                            <span>Crit On: <input type="number" name="arrt_struggleCrit" value="20" /> </span>
                        </div>
                        <div>
                            <input type="hidden" name="attr_struggle_db_roll" value="1d8+6" />
                            <span>DB: <input type="number" name="attr_struggle_db" value="4" /></span>
                            <span class="sheet-field" name="attr_struggle_db_roll">1d8+6</span>
                            <span> + <input type="text" name="attr_struggleDamageBonus" placeholder="Additional Damage" /></span>
                        </div>
                    </div>
                </div>
                <div class="sheet-row">
                    <textarea name="attr_struggleEffects" style="display:inline-block;max-width:100%"></textarea>
                </div>
            </div>
            
        <fieldset class="repeating_moves">
            <input type="hidden" name="attr_mlID" />
            <div class="sheet-table sheet-move-item">
                <span class="sheet-movesKnown-Add">
                    <input type="checkbox" name="attr_mlKnown" value="1" />
                    <div></div>
                </span>
                
                <!-- Header -->
                <input type="hidden" name="attr_mlType" class="sheet-move-type" />
                <div class="sheet-row sheet-move-header" >
                    <div style="width:40%">
                        <input type="text" placeholder="Move Name" name="attr_mlName" style="width:100%" />
                    </div><div style="width:25%">
                        <select name="attr_mlFrequency" class="sheet-move-freq">
                            <option selected="selected">At-Will</option>
                            <option>EOT</option>
                            <option>Scene</option>
                            <option>Daily</option>
                            <option>Static</option>
                            <option>Other</option>
                        </select>
                    </div><div style="width:10%">
                        <input type="hidden" name="attr_mlFrequency" value="At-Will" />
                        <input type="text" placeholder="Uses" name="attr_mlUses_max" class="sheet-move-uses" />
                    </div><div style="width:25%">
                        <select name="attr_mlCat">
                            <option selected="selected">Physical</option>
                            <option>Special</option>
                            <option>Support</option>
                        </select>
                    </div>
                </div>
                <div class="sheet-row">
                    <div style="width:30%" class="sheet-move-side">
                        <div>
                            <select name="attr_mlType">
                                <option value="Untyped" selected="selected">-</option>
                                <option>Normal</option>
                                <option>Bug</option>
                                <option>Dark</option>
                                <option>Dragon</option>
                                <option>Electric</option>
                                <option>Fairy</option>
                                <option>Fighting</option>
                                <option>Fire</option>
                                <option>Flying</option>
                                <option>Ghost</option>
                                <option>Grass</option>
                                <option>Ground</option>
                                <option>Ice</option>
                                <option>Poison</option>
                                <option>Psychic</option>
                                <option>Rock</option>
                                <option>Steel</option>
                                <option>Water</option>
                            </select>
                        </div>
                        <div>
                            <select name="attr_mlContestType">
                                <option selected="selected">Cool</option>
                                <option >Tough</option>
                                <option >Beauty</option>
                                <option >Smart</option>
                                <option >Cute</option>
                            </select>
                        </div>
                        <div>
                            <input name="attr_mlContestEffect" placeholder="Contest Effect"/>
                        </div>
                        
                        
                    </div><div style="width:70%" class="sheet-move-body" >
                        <div>
                            <span>Range: <input type="text" name="attr_mlRange" placeholder="6," /></span>
                        </div>
                        <div>
                            <span>AC: <input type="number" name="attr_mlAC" value="4" /></span>
                            <span>Crit On: <input type="number" name="attr_mlCrit" value ="20"/> </span>
                        </div>
                        <div>
                            <input type="hidden" name="attr_mlDB_roll" />
                            <span>DB: <input type="number" name="attr_mlDB" /></span>
                            <span class="sheet-field" name="attr_mlDB_roll"></span>
                            <span> + <input type="text" name="attr_mlDamageBonus" placeholder="Additional Damage" /></span>
                        </div>
                    </div>
                </div>
                <div class="sheet-row">
                    <textarea name="attr_mlEffects" style="display:inline-block;max-width:100%"></textarea>
                </div>
            </div>
            
        </fieldset>
    </div>
    
   
    <br/>
    
    <h3 class='sheet-header'>Contests</h3>
    <table class='sheet-table' style="margin-top: 10px;margin-bottom: 10px;width:90%" align="center">
        <tr>
        <td>
            <td class='sheet-table-header'>Beauty</td>
            <td><input type='number' name='attr_Beauty' /></td>
        </td>
        <td>
            <td class='sheet-table-header'>Cool</td>
            <td><input type='number' name='attr_Cool' /></td>
        </td>
        <td>
            <td class='sheet-table-header'>Cute</td>
            <td><input type='number' name='attr_Cute' /></td>
        </td>
        <td>
            <td class='sheet-table-header'>Smart</td>
            <td><input type='number' name='attr_Smart' /></td>
        </td>
        <td>
            <td class='sheet-table-header'>Tough</td>
            <td><input type='number' name='attr_Tough' /></td>
        </td>
        </tr>
    </table>
    <table class='sheet-table'>
        <td>
           <td class='sheet-table-header'>Poffins</td>
           <td><textarea class='sheet-textarea-b' name='attr_Poffins'></textarea></td>
        </td>
        <td>
           <td class='sheet-table-header'>Vitamins</td>
           <td><textarea class='sheet-textarea-b' name='attr_Vitamins'></textarea></td>
        </td>
    </table>
    
    <br/>
    <div class='sheet-row'>
        <h3 class="sheet-header">Skills</h3>
        <br />
        <table class='sheet-left-half-table' STYLE="margin-bottom: 20px;">
            <tr align = "center">
                <th class='sheet-minihead'>Skill Name</th>
                <th class='sheet-minihead'>Rank</th>
                <th class='sheet-minihead'>Other Modifiers</th>
                <th class='sheet-minihead'>Roll</th>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Acrobatics</td>
                <td><input type='number' name='attr_Acrobatics' value='2'/> d6+</td>
                <td><input type='number' name='attr_Acrobatics_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Acrobatics}} {{SL=[[@{Acrobatics}d6+@{Acrobatics_bonus}]]}}' name='roll_AcrobaticsCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Athletics</td>
                <td><input type='number' name='attr_Athletics' value='2'/> d6+</td>
                <td><input type='number' name='attr_Athletics_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Athletics}} {{SL=[[@{Athletics}d6+@{Athletics_bonus}]]}}' name='roll_AthleticsCheck'/></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Combat</td>
                <td><input type='number' name='attr_Combat' value='2'/> d6+</td>
                <td><input type='number' name='attr_Combat_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Combat}} {{SL=[[@{Combat}d6+@{Combat_bonus}]]}}' name='roll_CombatCheck'/></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Intimidate</td>
                <td><input type='number' name='attr_Intimidate' value='2'/> d6+</td>
                <td><input type='number' name='attr_Intimidate_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Intimidate}} {{SL=[[@{Intimidate}d6+@{Intimidate_bonus}]]}}' name='roll_IntimidateCheck'/></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Stealth</td>
                <td><input type='number' name='attr_Stealth' value='2'/> d6+</td>
                <td><input type='number' name='attr_Stealth_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Stealth}} {{SL=[[@{Stealth}d6+@{Stealth_bonus}]]}}' name='roll_StealthCheck'/></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Survival</td>
                <td><input type='number' name='attr_Survival' value='2'/> d6+</td>
                <td><input type='number' name='attr_Survival_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Survival}} {{SL=[[@{Survival}d6+@{Survival_bonus}]]}}' name='roll_SurvivalCheck'/></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>General Education</td>
                <td><input type='number' name='attr_GeneralEducation' value='2'/> d6+</td>
                <td><input type='number' name='attr_GeneralEducation_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=GeneralEducation}} {{SL=[[@{GeneralEducation}d6+@{GeneralEducation_bonus}]]}}' name='roll_GeneralEducationCheck'/></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Medicine Education</td>
                <td><input type='number' name='attr_MedicineEducation' value='2'/> d6+</td>
                <td><input type='number' name='attr_MedicineEducation_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=MedicineEducation}} {{SL=[[@{MedicineEducation}d6+@{MedicineEducation_bonus}]]}}' name='roll_MedicineEducationCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Occult Education</td>
                <td><input type='number' name='attr_OccultEducation' value='2'/> d6+</td>
                <td><input type='number' name='attr_OccultEducation_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=OccultEducation}} {{SL=[[@{OccultEducation}d6+@{OccultEducation_bonus}]]}}' name='roll_OccultEducationCheck' /></td>
            </tr>
        </table>
        <table class='sheet-right-half-table'>
            <tr align = "center">
                <th class='sheet-minihead'>Skill Name</th>
                <th class='sheet-minihead'>Rank</th>
                <th class='sheet-minihead'>Other Modifiers</th>
                <th class='sheet-minihead'>Roll</th>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Pokemon Education</td>
                <td><input type='number' name='attr_PokemonEducation' value='2'/> d6+</td>
                <td><input type='number' name='attr_PokemonEducation_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=PokemonEducation}} {{SL=[[@{PokemonEducation}d6+@{PokemonEducation_bonus}]]}}' name='roll_PokemonEducationCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Technology Education</td>
                <td><input type='number' name='attr_TechnologyEducation' value='2'/> d6+</td>
                <td><input type='number' name='attr_TechnologyEducation_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=TechnologyEducation}} {{SL=[[@{TechnologyEducation}d6+@{TechnologyEducation_bonus}]]}}' name='roll_TechnologyEducationCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Guile</td>
                <td><input type='number' name='attr_Guile' value='2'/> d6+</td>
                <td><input type='number' name='attr_Guile_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Guile}} {{SL=[[@{Guile}d6+@{Guile_bonus}]]}}' name='roll_GuileCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Perception</td>
                <td><input type='number' name='attr_Perception' value='2'/> d6+</td>
                <td><input type='number' name='attr_Perception_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Perception}} {{SL=[[@{Perception}d6+@{Perception_bonus}]]}}' name='roll_PerceptionCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Charm</td>
                <td><input type='number' name='attr_Charm' value='2'/> d6+</td>
                <td><input type='number' name='attr_Charm_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Charm}} {{SL=[[@{Charm}d6+@{Charm_bonus}]]}}' name='roll_CharmCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Command</td>
                <td><input type='number' name='attr_Command' value='2'/> d6+</td>
                <td><input type='number' name='attr_Command_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Command}} {{SL=[[@{Command}d6+@{Command_bonus}]]}}' name='roll_CommandCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Focus</td>
                <td><input type='number' name='attr_Focus' value='2'/> d6+</td>
                <td><input type='number' name='attr_Focus_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Focus}} {{SL=[[@{Focus}d6+@{Focus_bonus}]]}}' name='roll_FocusCheck' /></td>
            </tr>
            <tr align = "center">
                <td class='sheet-table-header'>Intuition</td>
                <td><input type='number' name='attr_Intuition' value='2'/> d6+</td>
                <td><input type='number' name='attr_Intuition_bonus' value='0'/></td>
                <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Intuition}} {{SL=[[@{Intuition}d6+@{Intuition_bonus}]]}}' name='roll_IntuitionCheck' /></td>
            </tr>
        </table> <!--
        </tr>
        </table> -->
    
    </div>
    <br/>
    <div class='sheet-3colrow'>
        <div class='sheet-col'>
            <h3 class='sheet-header'>Edges</h3>
            <br />
            <table class='sheet-table'>
                <tr>
                    <td class='sheet-table-header'>Remaining Tutor Points</td>
                    <td><input type='number' name='attr_TutorPoints'/></td>
                </tr>
                <tr>
                    <td class='sheet-table-header'>Max Tutor Points</td>
                    <td><input type='number' name='attr_TutorPoints_max' value='((1-@{CharType}))*(floor(@{Level} / 5)+1)'/></td>
                </tr>
            </table>
            <fieldset class='repeating_edges'>
                <br/>
                <input type="checkbox" class="sheet-arrow" name="attr_EdgeHide"/><span></span>
                <h4 class='sheet-minihead'>Edge</h4>
                <table class='sheet-table'>
                    <tr>
                        <td class='sheet-table-header'>Name:</td>
                        <td><input class='sheet-shortfield' name='attr_EdgeName' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Prerequisites:</td>
                        <td><input class='sheet-shortfield' name='attr_EdgePrereq' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>TP Cost:</td>
                        <td><input class='sheet-shortfield' name='attr_EdgeCost' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Other Info:</td>
                        <td><textarea class='sheet-textarea-b' name='attr_EdgeInfo'></textarea></td>
                    </tr>
                      <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Display:</td>
                        <td><button type='roll' value='&{template:PTU} {{dis=Edge}} {{desc=@{EdgeInfo}}} {{nick=@{nickname}}} {{name=@{EdgeName}}} {{prereq=@{FeatureTarget}}} {{cost=@{FeatureTarget}}}' name='roll_EdgeRoll' /> Show</td>
                      </tr>
                </table>
            </fieldset>
        </div>
        <div class='sheet-col'>
            <h3 class='sheet-header'>Features</h3>
            <br />
            <input type="checkbox" class="sheet-arrow" name="attr_FeatureHide"/><span></span>
            <h4 class='sheet-minihead'>Feature</h4>
            <table class='sheet-table'>
                <tr>
                    <td class='sheet-table-header'>Name:</td>
                    <td><input class='sheet-shortfield' name='attr_FeatureName' type='text'></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Frequency:</td>
                    <td><input class='sheet-shortfield' name='attr_FeatureFreq' type='text'></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Target:</td>
                    <td><input class='sheet-shortfield' name='attr_FeatureTarget' type='text'></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Other Info:</td>
                    <td><textarea class='sheet-textarea-b' name='attr_FeatureInfo'></textarea></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Display:</td>
                    <td><button type='roll' value='&{template:PTU} {{dis=Feature}} {{desc=@{FeatureInfo}}} {{nick=@{nickname}}} {{name=@{FeatureName}}} {{freq=@{FeatureFreq}}} {{tar=@{FeatureTarget}}}' name='roll_FeatRoll' /> Show</td>
                </tr>
            </table>
            <fieldset class='repeating_features'>
                <br/>
                <input type="checkbox" class="sheet-arrow" name="attr_Feature_Hide"/><span></span>
                <h4 class='sheet-minihead'>Feature</h4>
                <table class='sheet-table'>
                    <tr>
                        <td class='sheet-table-header'>Name:</td>
                        <td><input class='sheet-shortfield' name='attr_Feature_Name' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Frequency:</td>
                        <td><input class='sheet-shortfield' name='attr_Feature_Freq' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Target:</td>
                        <td><input class='sheet-shortfield' name='attr_Feature_Target' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Other Info:</td>
                        <td><textarea class='sheet-textarea-b' name='attr_Feature_Info'></textarea></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Display:</td>
                        <td><button type='roll' value='&{template:PTU} {{dis=Feature}} {{desc=@{Feature_Info}}} {{nick=@{nickname}}} {{name=@{Feature_Name}}} {{freq=@{Feature_Freq}}} {{tar=@{Feature_Target}}}' name='roll_FeatRoll' /> Show</td>
                    </tr>
                </table>
            </fieldset>
        </div>
        <div class='sheet-col'>
            <h3 class="sheet-header">Abilities</h3>
            <br />
            <input type="checkbox" class="sheet-arrow" name="attr_AbilityHide"/><span></span>
            <h4 class='sheet-minihead'>Ability</h4>
            <table class='sheet-table'>
                <tr>
                    <td class='sheet-table-header'>Name:</td>
                    <td><input class='sheet-shortfield' name='attr_AbilityName' type='text'></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Frequency:</td>
                    <td><input class='sheet-shortfield' name='attr_AbilityFreq' type='text'></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Target:</td>
                    <td><input class='sheet-shortfield' name='attr_AbilityTarget' type='text'></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Other Info:</td>
                    <td><textarea class='sheet-textarea-b' name='attr_AbilityInfo'></textarea></td>
                </tr>
                <tr class="sheet-featlist">
                    <td class='sheet-table-header'>Display:</td>
                    <td><button type='roll' value='&{template:PTU} {{dis=Ability}} {{desc=@{AbilityInfo}}} {{nick=@{nickname}}} {{name=@{AbilityName}}} {{freq=@{AbilityFreq}}} {{tar=@{AbilityTarget}}}' name='roll_AbilRoll' /> Show</td>
                </tr>
            </table>
            <fieldset class='repeating_abilities'>
                <br/>
                <input type="checkbox" class="sheet-arrow" name="attr_Ability_Hide"/><span></span>
                <h4 class='sheet-minihead'>Ability</h4>
                <table class='sheet-table'>
                    <tr>
                        <td class='sheet-table-header'>Name:</td>
                        <td><input class='sheet-shortfield' name='attr_Ability_Name' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Frequency:</td>
                        <td><input class='sheet-shortfield' name='attr_Ability_Freq' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Target:</td>
                        <td><input class='sheet-shortfield' name='attr_Ability_
                        ' type='text'></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Other Info:</td>
                        <td><textarea class='sheet-textarea-b' name='attr_Ability_Info'></textarea></td>
                    </tr>
                    <tr class="sheet-featlist">
                        <td class='sheet-table-header'>Display:</td>
                        <td><button type='roll' value='&{template:PTU} {{dis=Ability}} {{desc=@{Ability_Info}}} {{nick=@{nickname}}} {{name=@{Ability_Name}}} {{freq=@{Ability_Freq}}} {{tar=@{Ability_Target}}}' name='roll_AbilRoll' /> Show</td>
                    </tr>
                </table>
            </fieldset>
        </div>
    </div>
    
    <br/>
    
    <div class='sheet-row'>
        <h3 class="sheet-header">Inventory</h3>
        
        <div class="sheet-inventory-money">
            <span>Money</span>
            <input type="number" name='attr_money' value="0" min='0' />
        </div>

        <fieldset class='repeating_inventory'>
            
            <div class="sheet-inventory-item">
                <span class="sheet-hide-container">
                    <input type="hidden" name="attr_InventoryHide" class="sheet-hide-swap" value="0" />
                    <input type="checkbox" name="attr_InventoryHide" value="1" />
                    
                    <img src="https://raw.githubusercontent.com/ChevronAllen/PTU/reworked/Expand-Icon.png" class="sheet-a" />
                    <img src="https://raw.githubusercontent.com/ChevronAllen/PTU/reworked/Collapse-Icon.png"   class="sheet-b" />
                </span>
                <input type="hidden" name="attr_InventoryHide" class="sheet-hide-swap" value="0" />
                <input type="number" name='attr_InventoryQuantity' value="1" />
                <input type="text" name='attr_InventoryName' />
                <textarea class="sheet-b" name="attr_InventoryDesc"></textarea>
            </div>
            
        </fieldset>
    </div>
    <div class='sheet-row'>
        <input type="checkbox" class="sheet-arrow" /><span></span>
        <h3 class="sheet-header">Ability/Feature/Edge/Various Support</h3>
        <table>
        <tr>
        <td>
        <div class="sheet-checklist">Sniper–Original:
        <select name="attr_sniper" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Sniper–Playtest:
        <select name="attr_snipern" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value="3d10">On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Type Aura–Playtest (True when affected by one):
        <select name="attr_typeatrue" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        Enter the types below, separated by spaces.<input class='sheet-shortfield' name="attr_typeatype" type='text'/>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Incandescence–Original (True only on a Pokémon Incandescence has been used on):
        <select name="attr_incando" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Flash Fire–Original (True only after hit by a fire move):
        <select name="attr_flashfire" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        </tr>
        <tr>
        <td>
        <div class="sheet-checklist">Weird Power:
        <select name="attr_weird" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Twisted Power:
        <select name="attr_twist" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Last Chance:
        <select name="attr_lastctrue" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        Enter the types below, separated by spaces.<input class='sheet-shortfield' name="attr_lastctype" type='text'/>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Incandescence–Playtest (True only on a Pokémon Incandescence has been used on):
        <select name="attr_incandn" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Damp–Playtest Bonus Damage:
        <select name="attr_damp" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        </tr>
        <tr>
        <td>
        <div class="sheet-checklist">Aura Storm–Playtest:
        <select name="attr_aurastn" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Defeatist–Playtest:
        <select name="attr_defeat" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Adaptability–Playtest:
        <select name="attr_adaptn" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        Enter STAB types below, separated by spaces.<input class='sheet-shortfield' name="attr_STAB" type='text'/>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Hustle–Playtest Damage Bonus:
        <select name="attr_hustle" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        <td>
        <div class="sheet-checklist">Courage:
        <select name="attr_courage" class="sheet-shortfield2">
            <option value=0>Off</option>
            <option value=1>On</option>
        </select>
        </div>
        </td>
        </tr>
        </table>
    </div>
</div>

<!-- Roll Page -->
<div class="sheet-oldtab3">
    <div class='sheet-row'>
        <h3 class="sheet-header">Roll Page</h3>
        <br>
        <table class='sheet-table' align = "center">
            <tr>
            <h3 class="sheet-header">Skill Rolls</h3>
            </tr>
            <tr>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Acrobatics}} {{SL=[[@{Acrobatics}d6+@{Acrobatics_bonus}]]}}' name='roll_AcrobaticsCheck' />Acrobatics</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Athletics}} {{SL=[[@{Athletics}d6+@{Athletics_bonus}]]}}' name='roll_AthleticsCheck'/>Athletics</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Combat}} {{SL=[[@{Combat}d6+@{Combat_bonus}]]}}' name='roll_CombatCheck'/>Combat</td>
            </tr>
            <tr>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Intimidate}} {{SL=[[@{Intimidate}d6+@{Intimidate_bonus}]]}}' name='roll_IntimidateCheck'/>Intimidate</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Stealth}} {{SL=[[@{Stealth}d6+@{Stealth_bonus}]]}}' name='roll_StealthCheck'/>Stealth</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Survival}} {{SL=[[@{Survival}d6+@{Survival_bonus}]]}}' name='roll_SurvivalCheck'/>Survival</td>
            </tr>
            <tr>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=GeneralEducation}} {{SL=[[@{GeneralEducation}d6+@{GeneralEducation_bonus}]]}}' name='roll_GeneralEducationCheck'/>General Education</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=MedicineEducation}} {{SL=[[@{MedicineEducation}d6+@{MedicineEducation_bonus}]]}}' name='roll_MedicineEducationCheck' />Medicine Education</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=OccultEducation}} {{SL=[[@{OccultEducation}d6+@{OccultEducation_bonus}]]}}' name='roll_OccultEducationCheck' />Occult Education</td>
            </tr>
            <tr>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=PokemonEducation}} {{SL=[[@{PokemonEducation}d6+@{PokemonEducation_bonus}]]}}' name='roll_PokemonEducationCheck' />Pokemon Education</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=TechnologyEducation}} {{SL=[[@{TechnologyEducation}d6+@{TechnologyEducation_bonus}]]}}' name='roll_TechnologyEducationCheck' />Technology Education</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Guile}} {{SL=[[@{Guile}d6+@{Guile_bonus}]]}}' name='roll_GuileCheck' />Guile</td>
            </tr>
            <tr>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Perception}} {{SL=[[@{Perception}d6+@{Perception_bonus}]]}}' name='roll_PerceptionCheck' />Perception</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Charm}} {{SL=[[@{Charm}d6+@{Charm_bonus}]]}}' name='roll_CharmCheck' />Charm</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Command}} {{SL=[[@{Command}d6+@{Command_bonus}]]}}' name='roll_CommandCheck' />Command</td>
            </tr>
            <tr>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Focus}} {{SL=[[@{Focus}d6+@{Focus_bonus}]]}}' name='roll_FocusCheck' />Focus</td>
            <td><button type='roll' value='&{template:PTU} {{nick=@{nickname}}} {{skill=Intuition}} {{SL=[[@{Intuition}d6+@{Intuition_bonus}]]}}' name='roll_IntuitionCheck' />Intuition</td>
            <td>&nbsp;</td>    
            </tr>
        </table>
        <br>
        <div >
            <fieldset class="repeating_movesKnown">
                <div class="sheet-table sheet-moveKnown-item">
                    <div class="sheet-row">
                        <span>Name</span>
                    </div>
                    <div class="sheet-row">
                        <span>Frequency</span>
                    </div>
                    <div class="sheet-row">
                        <span>AC</span> <span>Crit</span>
                    </div>
                    <div class="sheet-row">
                        <span>DB</span> <span>Roll</span>
                    </div>
                    <div class="sheet-row">
                        <div style="width:50%">
                            <button type="roll">Accuracy</button>
                        </div><div style="width:50%">
                            <button type="roll">Damage</button>
                        </div>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>    
</div>

<!-- Import -->
<div class="sheet-oldtab4" style="background-color:#f2f2f2;"> 
    <textarea class='sheet-textarea' name='attr_input'></textarea>
</div>
